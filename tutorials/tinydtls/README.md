# Build Contiki-ng TinyDTLS
  
    export WORKDIR=$(pwd)
    cd $WORKDIR
    
    # fork de-randomized version of TinyDTLS commit 094143f (the latest commit as of now)
    git clone git@github.com:assist-project/tinydtls-fuzz.git tinydtls
    
    # building de-randomized version 
    (cd tinydtls/tests; git checkout 06995d4; CC=afl-clang-fast make clean all)
    
# Test TinyDTLS installation
In two separate terminals run the client and the server and check that they can communicate (over port 20220).

Run server:

    ./tinydtls/tests/dtls-server
    
Run client:
    
    ./tinydtls/tests/dtls-client localhost

# Fuzzing
For fuzzing DTLS implementations we use server/client messages generated by our de-randomized dtls-client/dtls-server utilities. 
De-randomization ensures that each concrete sequence of inputs prompts a unique response of the system.
We use the '-W' option to tweak the polling delay (the amount of time the SUT waits for an answer). 

Note, since eliptic curve cryptography is slow, one may consider disabling it in the server application.

Fuzzing:

    afl-fuzz -d -i $AFLNET/tutorials/tinydtls/completed_handshakes/ -o out-tinydtls/ -N udp://127.0.0.1/20220 -P DTLS -D 10000 -q 3 -s 3 -E -K -R -W 100 ./tinydtls/tests/dtls-server
   





